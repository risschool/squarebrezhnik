<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Squarebrezhnik.ru</title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
    var socket = io();
    console.log(socket)
    socket.emit("auth",document.cookie)
    socket.emit("path",document.location.pathname)
    var requests=new Map()
        function generateRQID(cb){
            var id=Math.floor(Math.random()*0xffff).toString(16)
            requests.set(id,cb)
            return id
        }
    function request(what,cb){
        socket.emit("requestData",what,generateRQID(cb))
    }
    socket.on("responseData",(d,id)=>requests.get(id)(d))
    </script>
</head>
<body>
    
</body>
</html>